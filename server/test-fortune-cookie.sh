#!/bin/bash

# Test typecheck endpoint
echo "Testing typecheck endpoint..."
curl -X POST https://server-wild-sea-9370.fly.dev/typecheck \
   -H "Content-Type: application/json" \
   -d '{
  "code": "import { Button, Flex, Text } from '\''@crayonnow/core'\'';\nimport { useState } from '\''react'\'';\n\nconst fortunes = [\n  \"A beautiful, smart, and loving person will be coming into your life.\",\n  \"Believe it can be done.\",\n  \"Your ability to overcome challenges will set you up for success.\",\n  \"Do not mistake temptation for opportunity.\",\n  \"Your greatest strength is your ability to stay positive.\",\n  \"You will be rewarded for your kindness.\",\n  \"A pleasant surprise is waiting for you.\",\n  \"The best way to predict the future is to create it.\",\n  \"Your creativity will lead you to success.\",\n  \"Good things come to those who wait, but better things come to those who go out and get them.\"\n];\n\nexport default () => {\n  const [currentFortune, setCurrentFortune] = useState(fortunes[0]);\n\n  const getNewFortune = () => {\n    const randomIndex = Math.floor(Math.random() * fortunes.length);\n    setCurrentFortune(fortunes[randomIndex]);\n  };\n\n  return (\n    <Flex style={{\n      flexDirection: '\''column'\'',\n      justifyContent: '\''center'\'',\n      alignItems: '\''center'\'',\n      height: '\''100vh'\'',\n      padding: '\''20px'\'',\n      background: '\''#f0e6d2'\'' // Cookie-like background\n    }}>\n      <Text style={{\n        fontSize: '\''24px'\'',\n        fontWeight: '\''bold'\'',\n        color: '\''#5a3a22'\'', // Dark brown for text\n        margin: '\''0 0 30px 0'\'', // Replaced marginBottom with margin\n        textAlign: '\''center'\''\n      }}>\n        Your Fortune\n      </Text>\n      <Flex style={{\n        flexDirection: '\''column'\'',\n        justifyContent: '\''center'\'',\n        alignItems: '\''center'\'',\n        background: '\''white'\'',\n        borderRadius: '\''16px'\'',\n        padding: '\''30px'\'',\n        border: '\''2px solid #d4a056'\'', // Golden border\n        // boxShadow removed as it'\''s not a valid property\n        // minHeight removed as it'\''s not a valid property\n        height: '\''150px'\'', // Using height instead of minHeight\n        width: '\''80%'\'',\n        // maxWidth removed as it'\''s not a valid property\n      }}>\n        <Text style={{\n          fontSize: '\''18px'\'',\n          color: '\''#8b4513'\'', // Saddle brown for fortune text\n          textAlign: '\''center'\'',\n          lineHeight: '\''1.5'\''\n        }}>\n          {currentFortune}\n        </Text>\n      </Flex>\n      <Button onClick={getNewFortune} style={{\n        margin: '\''30px 0 0 0'\'', // Replaced marginTop with margin\n        padding: '\''15px 30px'\'',\n        background: '\''#d4a056'\'', // Golden button\n        borderRadius: '\''25px'\'',\n        border: '\''none'\'',\n        color: '\''white'\'',\n        fontSize: '\''18px'\'',\n        fontWeight: '\''bold'\''\n        // cursor removed as it'\''s not a valid property\n      }}>\n        <Text style={{ color: '\''white'\'' }}>Get New Fortune</Text>\n      </Button>\n    </Flex>\n  );\n};"
}'

echo -e "\n\n"

# Test compile endpoint
echo "Testing compile endpoint..."
curl -X POST https://server-wild-sea-9370.fly.dev/compile \
   -H "Content-Type: application/json" \
   -d '{
  "code": "import { Button, Flex, Text } from '\''@crayonnow/core'\'';\nimport { useState } from '\''react'\'';\n\nconst fortunes = [\n  \"A beautiful, smart, and loving person will be coming into your life.\",\n  \"Believe it can be done.\",\n  \"Your ability to overcome challenges will set you up for success.\",\n  \"Do not mistake temptation for opportunity.\",\n  \"Your greatest strength is your ability to stay positive.\",\n  \"You will be rewarded for your kindness.\",\n  \"A pleasant surprise is waiting for you.\",\n  \"The best way to predict the future is to create it.\",\n  \"Your creativity will lead you to success.\",\n  \"Good things come to those who wait, but better things come to those who go out and get them.\"\n];\n\nexport default () => {\n  const [currentFortune, setCurrentFortune] = useState(fortunes[0]);\n\n  const getNewFortune = () => {\n    const randomIndex = Math.floor(Math.random() * fortunes.length);\n    setCurrentFortune(fortunes[randomIndex]);\n  };\n\n  return (\n    <Flex style={{\n      flexDirection: '\''column'\'',\n      justifyContent: '\''center'\'',\n      alignItems: '\''center'\'',\n      height: '\''100vh'\'',\n      padding: '\''20px'\'',\n      background: '\''#f0e6d2'\'' // Cookie-like background\n    }}>\n      <Text style={{\n        fontSize: '\''24px'\'',\n        fontWeight: '\''bold'\'',\n        color: '\''#5a3a22'\'', // Dark brown for text\n        margin: '\''0 0 30px 0'\'', // Replaced marginBottom with margin\n        textAlign: '\''center'\''\n      }}>\n        Your Fortune\n      </Text>\n      <Flex style={{\n        flexDirection: '\''column'\'',\n        justifyContent: '\''center'\'',\n        alignItems: '\''center'\'',\n        background: '\''white'\'',\n        borderRadius: '\''16px'\'',\n        padding: '\''30px'\'',\n        border: '\''2px solid #d4a056'\'', // Golden border\n        // boxShadow removed as it'\''s not a valid property\n        // minHeight removed as it'\''s not a valid property\n        height: '\''150px'\'', // Using height instead of minHeight\n        width: '\''80%'\'',\n        // maxWidth removed as it'\''s not a valid property\n      }}>\n        <Text style={{\n          fontSize: '\''18px'\'',\n          color: '\''#8b4513'\'', // Saddle brown for fortune text\n          textAlign: '\''center'\'',\n          lineHeight: '\''1.5'\''\n        }}>\n          {currentFortune}\n        </Text>\n      </Flex>\n      <Button onClick={getNewFortune} style={{\n        margin: '\''30px 0 0 0'\'', // Replaced marginTop with margin\n        padding: '\''15px 30px'\'',\n        background: '\''#d4a056'\'', // Golden button\n        borderRadius: '\''25px'\'',\n        border: '\''none'\'',\n        color: '\''white'\'',\n        fontSize: '\''18px'\'',\n        fontWeight: '\''bold'\''\n        // cursor removed as it'\''s not a valid property\n      }}>\n        <Text style={{ color: '\''white'\'' }}>Get New Fortune</Text>\n      </Button>\n    </Flex>\n  );\n};"
}'